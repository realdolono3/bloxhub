<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Splitter + Discord</title>
    <style>
        /* Your existing CSS omitted for brevity. Keep all styles as you wrote them. */
        /* Include everything from your previous code for styling */
        body { font-family: Arial, sans-serif; background: #f5f8fa; padding: 20px; }
        textarea { width: 100%; min-height: 150px; font-size: 1rem; padding: 10px; }
        button { padding: 10px 15px; margin-top: 10px; cursor: pointer; }
        .segment { border: 1px solid #ddd; padding: 10px; margin: 10px 0; background: #fff; }
        .segment-header { font-size: 0.9rem; color: #666; margin-bottom: 5px; display: flex; justify-content: space-between; }
        .segment-content { white-space: pre-wrap; word-break: break-word; }
    </style>
</head>
<body>
    <h1>Text Splitter + Discord Sender</h1>
    <div class="input-section">
        <textarea id="inputText" placeholder="Paste your text here..."></textarea>
        <div>
            <label for="charLimit">Max characters per message:</label>
            <input type="number" id="charLimit" value="2000" min="100" max="10000">
        </div>
        <div>
            <input type="radio" id="paragraphSplit" name="splitPreference" value="paragraph" checked>
            <label for="paragraphSplit">Split at paragraph breaks</label>
            <input type="radio" id="wordSplit" name="splitPreference" value="word">
            <label for="wordSplit">Split at word boundaries</label>
        </div>
        <button id="processBtn">Process Text</button>
    </div>

    <div class="output-section">
        <h2>Output Segments</h2>
        <div id="segmentsContainer"></div>
        <button id="sendDiscordBtn">Send Segments to Discord</button>
    </div>

    <script>
        const inputText = document.getElementById('inputText');
        const charLimit = document.getElementById('charLimit');
        const paragraphSplit = document.getElementById('paragraphSplit');
        const processBtn = document.getElementById('processBtn');
        const segmentsContainer = document.getElementById('segmentsContainer');
        const sendDiscordBtn = document.getElementById('sendDiscordBtn');

        processBtn.addEventListener('click', function() {
            const text = inputText.value;
            const limit = parseInt(charLimit.value);
            const useParagraph = paragraphSplit.checked;

            if (!text) return alert("Please enter some text!");

            const segments = splitText(text, limit, useParagraph);
            displaySegments(segments);
        });

        function splitText(text, limit, useParagraph) {
            const segments = [];
            let currentSegment = '';

            if (useParagraph) {
                const paragraphs = text.split(/\n\s*\n/);
                for (const paragraph of paragraphs) {
                    if (currentSegment.length + paragraph.length + 2 > limit && currentSegment.length > 0) {
                        segments.push(currentSegment);
                        currentSegment = paragraph;
                    } else if (currentSegment.length + paragraph.length + 2 > limit) {
                        const wordSegments = splitByWords(paragraph, limit);
                        if (currentSegment.length > 0) {
                            wordSegments[0] = currentSegment + '\n\n' + wordSegments[0];
                            segments.push(...wordSegments);
                            currentSegment = '';
                        } else segments.push(...wordSegments);
                    } else {
                        currentSegment = currentSegment.length > 0 ? currentSegment + '\n\n' + paragraph : paragraph;
                    }
                }
                if (currentSegment.length > 0) segments.push(currentSegment);
            } else {
                segments.push(...splitByWords(text, limit));
            }

            return segments;
        }

        function splitByWords(text, limit) {
            const segments = [];
            let currentSegment = '';
            const words = text.split(/(\s+)/);

            for (const word of words) {
                if (currentSegment.length + word.length > limit) {
                    if (currentSegment.length > 0) {
                        segments.push(currentSegment);
                        currentSegment = word;
                    } else {
                        segments.push(word);
                        currentSegment = '';
                    }
                } else {
                    currentSegment += word;
                }
            }
            if (currentSegment.length > 0) segments.push(currentSegment);
            return segments;
        }

        function displaySegments(segments) {
            segmentsContainer.innerHTML = '';
            segments.forEach((seg, index) => {
                const div = document.createElement('div');
                div.className = 'segment';
                div.innerHTML = `<div class="segment-header">Segment ${index+1} of ${segments.length} - ${seg.length} chars</div>
                                 <div class="segment-content">${seg}</div>`;
                segmentsContainer.appendChild(div);
            });
        }

        // Send to Discord webhook
        sendDiscordBtn.addEventListener('click', async function() {
            const webhookURL = "https://discord.com/api/webhooks/1438635586889060444/CKHiCB0XsbDaHk2OIMMxk1_P8hjrIevMnJ8wPcIrr1doa5GhQcTVqyOYrLBBL7bcvCc";
            const segments = Array.from(document.querySelectorAll('.segment-content')).map(div => div.textContent);

            if (segments.length === 0) return alert("No segments to send!");

            try {
                for (let i = 0; i < segments.length; i++) {
                    await fetch(webhookURL, {
                        method: "POST",
                        mode: "no-cors",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ content: segments[i] })
                    });
                }
                alert(`Sent ${segments.length} segment(s) to Discord!`);
            } catch (err) {
                alert("Failed to send to Discord: " + err);
            }
        });
    </script>
</body>
</html>
