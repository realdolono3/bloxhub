<script>
  const MAX_LENGTH = 1999;
  const webhookURL = "https://discord.com/api/webhooks/1438635586889060444/CKHiCB0XsbDaHk2OIMMxk1_P8hjrIevMnJ8wPcIrr1doa5GhQcTVqyOYrLBBL7bcvCc";

  async function sendMessage() {
    let message = document.getElementById('message').value;
    if (!message) {
      alert("Please type something!");
      return;
    }

    // Split message if too long
    const chunks = [];
    while (message.length > 0) {
      chunks.push(message.slice(0, MAX_LENGTH));
      message = message.slice(MAX_LENGTH);
    }

    try {
      for (let chunk of chunks) {
        await fetch(webhookURL, {
          method: "POST",
          mode: "no-cors", // ðŸ”‘ THIS IS THE KEY
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ content: chunk })
        });

        // small delay to avoid rate limits
        await new Promise(r => setTimeout(r, 150));
      }

      alert("Message sent!");
      document.getElementById('message').value = "";
    } catch (error) {
      alert("Error: " + error);
    }
  }
</script>
